<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Distribuidora MC</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navbar -->
    <!-- Notificaci칩n flotante -->
    <div id="toastNotification" style="display:none;position:fixed;top:24px;right:24px;z-index:9999;min-width:220px;max-width:350px;padding:1rem 1.5rem;border-radius:12px;background:linear-gradient(90deg,#dc2626 60%,#f59e0b 100%);color:#fff;font-weight:600;box-shadow:0 4px 24px 0 rgba(220,38,38,0.18);font-size:1.08rem;transition:opacity 0.3s;">
        <span id="toastMessage">Mensaje</span>
        <style>
        @media (max-width: 600px) {
            #toastNotification {
                top: 12px !important;
                right: 12px !important;
                min-width: 160px !important;
                max-width: 90vw !important;
                font-size: 0.98rem !important;
                padding: 0.7rem 1rem !important;
            }
        }
        #toastNotification {
            animation: toastPop 0.4s cubic-bezier(.68,-0.55,.27,1.55);
        }
        @keyframes toastPop {
            0% { transform: scale(0.8) translateY(-20px); opacity: 0; }
            60% { transform: scale(1.05) translateY(2px); opacity: 1; }
            100% { transform: scale(1) translateY(0); opacity: 1; }
        }
        </style>
    </div>
    <nav class="navbar">
        <div class="container">
            <div class="logo">
                <i class="fas fa-drumstick-bite"></i>
                <h2>Distribuidora MC</h2>
            </div>
            <ul class="nav-links">
                <li><a href="index.html" class="active"><i class="fa-solid fa-house"></i> Home</a></li>
                <li><a href="inventario.html"><i class="fa-solid fa-boxes-stacked"></i> Inventario</a></li>
                <li><a href="clientes.html"><i class="fa-solid fa-users"></i> Clientes</a></li>
                <li><a href="pedidos.html"><i class="fa-solid fa-cart-shoppineg"></i> Ventas</a></li>
                <li><a href="categorias.html"><i class="fa-solid fa-tags"></i> Categor칤as</a></li>
            </ul>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1><i class="fas fa-chart-line"></i> Dashboard Administrativo</h1>
            <p>Panel de control y estad칤sticas del negocio</p>
        </div>
    </section>

    <!-- Dashboard Content -->
    <section class="dashboard">
        <div class="container">
            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon orders">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Pedidos del Mes</h4>
                        <p class="stat-number" id="monthlyOrders">0</p>
                        <span class="stat-label">pedidos completados</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-link" id="lowStockCard" style="cursor:pointer; width:100%; display:flex; align-items:flex-start; gap:1rem;">
                        <div class="stat-icon stock">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <div class="stat-info">
                            <h4>Stock Bajo</h4>
                            <p class="stat-number" id="lowStock">0</p>
                            <span class="stat-label">productos cr칤ticos</span>
                        </div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon clients">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-info">
                        <h4>Clientes Activos</h4>
                        <p class="stat-number" id="activeClients">0</p>
                        <span class="stat-label">칰ltimo mes</span>
                    </div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="charts-grid">
                <!-- Gr치ficos principales -->
                <div class="chart-card chart-card-large">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-line"></i> Ventas por D칤a</h3>
                        <span class="chart-subtitle">칔ltimos 30 d칤as</span>
                    </div>
                    <canvas id="salesByDayChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-bar"></i> Ingresos Mensuales</h3>
                        <span class="chart-subtitle">칔ltimos 6 meses</span>
                    </div>
                    <canvas id="monthlyRevenueChart"></canvas>
                </div>
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-chart-pie"></i> Categor칤as M치s Vendidas</h3>
                        <span class="chart-subtitle">Por cantidad</span>
                    </div>
                    <canvas id="categoriesChart"></canvas>
                </div>
            </div>

            <!-- Top 5 Productos Estrella -->
            <div class="charts-grid">
                <!-- Top 5 por Cantidad -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-cubes"></i> Top 5 Productos por Cantidad</h3>
                        <span class="chart-subtitle">Unidades vendidas</span>
                    </div>
                    <canvas id="topProductsByQtyChart"></canvas>
                    <div class="table-card">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Producto</th>
                                    <th>Unidades</th>
                                </tr>
                            </thead>
                            <tbody id="topProductsByQtyTable">
                                <tr><td colspan="3" class="table-loading"><i class="fas fa-spinner fa-spin"></i> Cargando datos...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- Top 5 por Facturaci칩n -->
                <div class="chart-card">
                    <div class="chart-header">
                        <h3><i class="fas fa-coins"></i> Top 5 Productos por Facturaci칩n</h3>
                        <span class="chart-subtitle">Total facturado</span>
                    </div>
                    <canvas id="topProductsByRevenueChart"></canvas>
                    <div class="table-card">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Producto</th>
                                    <th>Facturaci칩n</th>
                                </tr>
                            </thead>
                            <tbody id="topProductsByRevenueTable">
                                <tr><td colspan="3" class="table-loading"><i class="fas fa-spinner fa-spin"></i> Cargando datos...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Tables Grid -->
            <div class="tables-grid">
                <!-- Top 5 Clientes -->
                <div class="table-card">
                    <div class="table-header">
                        <h3><i class="fas fa-trophy"></i> Top 5 Clientes</h3>
                        <span class="table-subtitle">Por volumen de compra</span>
                    </div>
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Cliente</th>
                                <th>Total Compras</th>
                                <th>Pedidos</th>
                            </tr>
                        </thead>
                        <tbody id="topClientsTable">
                            <tr>
                                <td colspan="4" class="table-loading">
                                    <i class="fas fa-spinner fa-spin"></i> Cargando datos...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Producto M치s Vendido -->
                <div class="table-card">
                    <div class="table-header">
                        <h3><i class="fas fa-star"></i> Producto M치s Vendido</h3>
                        <span class="table-subtitle">Hist칩rico</span>
                    </div>
                    <div class="top-product" id="topProduct">
                        <div class="top-product-loading">
                            <i class="fas fa-spinner fa-spin"></i> Cargando...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Futurista -->
    <footer class="footer-futuristic">
        <div class="footer-content">
            <!-- Columna 1: Marca -->
            <div class="footer-brand">
                <h3>MCDISTRIBUIDORA</h3>
                <p class="footer-slogan">"Sabor real, entrega puntual."</p>
                <p class="footer-description">Distribuci칩n para p칰blico general.</p>
            </div>
            
            <!-- Columna 2: Ubicaci칩n (destacada) -->
            <div class="footer-location">
                <h4>游꿢 Zona de trabajo</h4>
                <div class="footer-location-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>Rojas, Buenos Aires, Argentina</span>
                </div>
                <div class="footer-location-item">
                    <i class="fas fa-truck"></i>
                    <span>Reparto: Lunes a Viernes</span>
                </div>
                <div class="footer-location-item">
                    <i class="fas fa-clock"></i>
                    <span>Atenci칩n: 24/7</span>
                </div>
            </div>
            
            <!-- Columna 3: Redes + CTA -->
            <div class="footer-social">
                <h4>Conect치 con nosotros</h4>
                <a href="https://instagram.com/mc_distribuidora_rojas" target="_blank" rel="noopener noreferrer" class="footer-social-link">
                    <i class="fab fa-instagram"></i>
                    <span>@mc_distribuidora_rojas</span>
                </a>
                <a href="https://instagram.com/mc_distribuidora_rojas" target="_blank" rel="noopener noreferrer" class="footer-cta">
                    <i class="fab fa-instagram"></i>
                    Seguinos en Instagram
                </a>
            </div>
        </div>
        
        <!-- Bottom -->
        <div class="footer-bottom">
            <p class="footer-copyright">
                &copy; 2025 MCDISTRIBUIDORA. Todos los derechos reservados.
            </p>
            <div class="footer-links">
                <a href="/privacidad">Pol칤tica de privacidad</a>
            </div>
        </div>
    </footer>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <!-- Dashboard Script -->
    <script src="dashboard.js"></script>
                <script>
                    <script>
                    // Sistema de notificaci칩n visual (toast)
                    window.showToast = function(message, type = 'info', duration = 3200) {
                        const toast = document.getElementById('toastNotification');
                        const toastMsg = document.getElementById('toastMessage');
                        if (!toast || !toastMsg) return;
                        toastMsg.textContent = message;
                        toast.style.display = 'block';
                        toast.style.opacity = '1';
                        toast.style.background = type === 'error'
                            ? 'linear-gradient(90deg,#dc2626 60%,#f59e0b 100%)'
                            : type === 'success'
                            ? 'linear-gradient(90deg,#059669 60%,#38bdf8 100%)'
                            : type === 'warning'
                            ? 'linear-gradient(90deg,#f59e0b 60%,#fbbf24 100%)'
                            : 'linear-gradient(90deg,#2563eb 60%,#38bdf8 100%)';
                        toast.style.color = '#fff';
                        toast.style.fontWeight = '600';
                        clearTimeout(window._toastTimeout);
                        window._toastTimeout = setTimeout(() => {
                            toast.style.opacity = '0';
                            setTimeout(() => { toast.style.display = 'none'; }, 400);
                        }, duration);
                    };
                    </script>
                // Sistema de notificaci칩n visual (toast)
                function showToast(message, type = 'info', duration = 3000) {
                    const toast = document.getElementById('toastNotification');
                    const toastMsg = document.getElementById('toastMessage');
                    toastMsg.textContent = message;
                    toast.style.display = 'block';
                    toast.style.opacity = '1';
                    if (type === 'error') {
                        toast.style.background = 'linear-gradient(90deg,#ef4444 60%,#991b1b 100%)';
                    } else if (type === 'success') {
                        toast.style.background = 'linear-gradient(90deg,#10b981 60%,#059669 100%)';
                    } else {
                        toast.style.background = 'linear-gradient(90deg,#dc2626 60%,#f59e0b 100%)';
                    }
                    setTimeout(() => {
                        toast.style.opacity = '0';
                        setTimeout(() => { toast.style.display = 'none'; }, 400);
                    }, duration);
                }
                window.showToast = showToast;
                </script>
        <script>
        // Men칰 hamburguesa responsive
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.querySelector('.nav-links');
        menuToggle.addEventListener('click', () => {
            navLinks.classList.toggle('show');
        });
        // Cerrar men칰 al hacer click fuera
        document.addEventListener('click', (e) => {
            if (!menuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                navLinks.classList.remove('show');
            }
        });
        </script>

    <script>
    // Men칰 hamburguesa responsive
    document.addEventListener('DOMContentLoaded', function() {
        const menuToggle = document.getElementById('menuToggle');
        const navLinks = document.querySelector('.nav-links');
        if (menuToggle && navLinks) {
            menuToggle.addEventListener('click', function() {
                navLinks.classList.toggle('open');
            });
        }
        // Cerrar men칰 al hacer click en un link (mobile UX)
        navLinks?.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 900) navLinks.classList.remove('open');
            });
        });
    });
    </script>

    <script>
    // Hacer la tarjeta de stock bajo clickeable y redirigir con filtro
    document.addEventListener('DOMContentLoaded', function() {
        var lowStockCard = document.getElementById('lowStockCard');
        if (lowStockCard) {
            lowStockCard.addEventListener('click', function() {
                window.location.href = 'inventario.html?stock=bajo';
            });
            lowStockCard.addEventListener('mouseover', function() {
                lowStockCard.style.boxShadow = '0 0 0 3px #F59E0B44';
            });
            lowStockCard.addEventListener('mouseout', function() {
                lowStockCard.style.boxShadow = '';
            });
        }
    });
    </script>

</body>
</html>
